mAhr Plot
#########

The P1125 `mAhr` plot is very useful for acquiring long running plots and estimating battery life.

.. note::

    For `very` long running acquisitions, :ref:`Scripting` is recommended.


.. index:: mahr


.. figure:: _static/p1125_mahr_main_01.png
    :figwidth: 100%
    :align: center


1. The mAhr plot is accessed via the plot tabs.

  While an acquisition is running, the user may toggle between the plot tabs.

2. The statistics of the mAhr plotted.  The last item is the percent complete of the set Stop time.
3. The Stop Time for the mAhr plot is selected.

.. note::

    To get the most accurate estimation of your battery life, the Stop Time
    should be set to a time that captures >10 "life cycles" of your target.
    For example, if your target wakes up once a minute to "work", then perhaps
    a Stop Time of 10min would capture enough life cycles to calculate a good
    average current.


4. Y-scale data source.
5. The RUN command begins mAhr data acquisition.  To restart the acquisition, press STOP, and then RUN.
   The mAhr plot does not run in SINGLE mode.
6. Peak current measured during 480 samples (explained below).
7. Average current measured and calculated during 480 samples (explained below).


* The mAhr plot is always running as a background task.
* If you are not interested in the mAhr plot, its best to set the Stop Time to 30 seconds.
* While the mAhr acquisition is running the realtime Log/Lin plots will be running.
  If you are not interested in the realtime plots, its best to keep the timespan setting small.


Acquisition Details
-------------------

.. figure:: _static/mAhr_11.png
    :figwidth: 100%
    :align: center

* The P1125 is ALWAYS sampling at one rate, that is `48000 Hertz`.
* mAhr (average) samples are integrated over 480 samples, which is 10.0ms.
* Thus "fast" wakeup/radio events on the target device are captured in this average current, because the
  sampling rate remains the same.
* Over the 480 samples, the peak current sample is noted, and then plotted as a peak at
  the same sample time as the average.  Therefore if an unexpected peak current occurs
  it can be seen, aiding in debugging.



Battery Life
------------

An example mAhr plot is acquired with the `Demo` mode.

.. figure:: _static/p1125_mahr_stats_01.png
    :figwidth: 100%
    :align: center

1. At the end of 30 seconds, the mAhr statistics are shown. Here the mAhr calculation is `0.10391 mAhr`.
2. To estimate your battery life, divide your battery mAhr rating by `0.10391`.


Crosshair Stats
---------------

Similar to other plots, the crosshair tool can be used to get stats over a specific region of the mAhr plot.


.. figure:: _static/p1125_mahr_cross_01.png
    :figwidth: 100%
    :align: center


1. Select the crosshair tool.
2. Select a starting point in the plotted area.  Next select an ending point.

.. note::

    While the crosshair tool is selected, every click on the plotted area will move the starting/ending
    point, in this way one can zero in on the specific area of interest.  When the desired area is highlighted,
    select the crosshair tool to disable the crosshair mode.


3. The stats for the selected area are shown.  These stats, specifically the Coulombs,
   can be used for battery life modelling.
4. When finished, clear the crosshair cursors.

